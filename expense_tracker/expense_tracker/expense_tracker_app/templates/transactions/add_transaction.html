{% extends './base_dashboard.html' %}

{% block title %} Add Transaction {% endblock %}

{% block content %}

<div id="add-transaction-container" class="add-transaction-container"  ></div>

<script>
    class TransactionForm extends HTMLElement {
        constructor(){
            super();
            const shadow = this.attachShadow({ mode: 'open' });
            shadow.innerHTML=`
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
            
            <form action="" method="post" class="bg-light text-light p-4 rounded" >
                <div class="container">
                <h2 style="padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--c-gray-600);"> Add Transaction </h2>
                <span class="px-3"></span>
                    <div class="mb-3 border border-5" style="border-color: white; color: white;">
                        <input type="text" style="border: solid !important; border-color: white !important;" class="form-control" id="payee-name" placeholder="Payee Name or Merchant name" required>
                    </div>
                    <div class="mb-3 border border-5" style="border-color: white; color: white;">
                        <input type="text" class="form-control bg-dark text-light" id="category-name" placeholder="Category Name" style="border: solid !important; border-color: white !important;" required>
                    </div>
                    <div class="row">
                        <div class="col">
                            Transaction Type
                        </div>
                        <div class=" col form-check mb-3 border border-5" style="border-color: white; color: white;">
                            <input type="radio" class="form-check-input" name="transaction_type" id="income" value="income" style="border: solid !important; border-color: white !important;" required>
                            <label for="income" class="form-check-label">Income</label>
                        </div>
                        <div class=" col form-check mb-3 border border-5" style="border-color: white; color: white;">
                            <input type="radio" class="form-check-input" name="transaction_type" id="expense" value="expense" style="border: solid !important; border-color: white !important;" required>
                            <label for="expense" class="form-check-label">Expense</label>
                        </div>
                    </div>
                    
                    
                    <div class="input-group mb-3 border border-5" style="border-color: white; color: white;">
                        <textarea name="description" class="form-control bg-dark text-light" placeholder="Description" id="description" style="border: solid !important; border-color: white !important;"></textarea>
                    </div>
                    <div class="mb-3 border border-5" style="border-color: white; color: white;">
                        <input type="number" class="form-control bg-dark text-light" placeholder="Amount" name="amount" style="border: solid !important; border-color: white !important;" required>
                    </div>
                    <div class="row">
                        <div class="col">
                            Transaction Status
                        </div>
                        <div class=" col form-check mb-3 border border-5" style="border-color: white; color: white;">
                            <input type="radio" class="form-check-input" name="transaction_status" id="completed" value="completed" style="border: solid !important; border-color: white !important;" required>
                            <label for="completed" class="form-check-label">Completed</label>
                        </div>
                        <div class=" col form-check mb-3 border border-5" style="border-color: white; color: white;">
                            <input type="radio" class="form-check-input" name="transaction_status" id="scheduled" value="scheduled" style="border: solid !important; border-color: white !important;" required>
                            <label for="scheduled" class="form-check-label">Scheduled</label>
                        </div>
                    </div>
                    <div class="mb-3 border border-5 row" style="border-color: white; color: white;">
                        <div class="col">
                            <label for="scheduled-time" class="form-label">Transaction Time</label>
                        </div>
                        <div class="col">
                            <input type="date" name="date" id="date" class="form-control bg-dark text-light mb-2" style="border: solid !important; border-color: white !important;" required>
                        </div>
                        <div class="col">
                            <input type="time" name="time" id="time" class="form-control bg-dark text-light" style="border: solid !important; border-color: white !important;" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <button type="submit" class="btn btn-primary mt-3">Submit </button>
                </div>
            </form>
            
            <form enctype="multipart/form-data" method="post">
                {% csrf_token %}
                <p>Accepts Llyods Bank Statement in excel and pdf format</p>
                <div class="mb-3">
                    <label for=""> Bank Statement </label>
                    {{ bank_statement_form.as_p }}
                </div>
                <button type="submit">Upload</button>
            </form>`;
        }
    }
    customElements.define('transaction-form', TransactionForm);

    // Ensure the script runs after the DOM is fully loaded
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('add-transaction-container').appendChild(new TransactionForm());
    });
</script>



{% endblock %}
